"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3699],{60368:function(e,n,r){var t=r(35944),a=r(87603),i=r.n(a);r(67294);n.Z=function(e){var n=e.maxLength,r=void 0===n?140:n,a=e.value,l=void 0===a?"":a,o=e.hideLabel,u=void 0!==o&&o;return(0,t.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[l.length," / ",r," ",u?"":"characters",(0,t.tZ)(i(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},80658:function(e,n,r){r.d(n,{Z:function(){return E}});var t=r(26042),a=r(69396),i=r(10253),l=r(35944),o=r(67294),u=r(92876),c=r(30992),s=r(15085),d=r(98967),p=r(83074),v=r(58086),h=r(37424),f=r(60368),m=r(14455),g=r(9836),Z=r(30168),R=r(94412),k=r(7297),w=r(31230),b=r(97212),y=r(37887);function x(){var e=(0,k.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}var _={},B=(0,w.Ps)(x(),b.s,b.a);var P=r(99383),C=function(e){var n=e.onFork,r=e.hideModal,t=e.initialTitle,a=e.initialDescription,u=void 0===a?"":a,d=e.initialPrivacy,k=e.teamContext,w=e.currentUser,b=o.useRef(null),y=(0,h.H)(),x=(0,i.Z)((0,g.Y)(w,k),2),_=x[0],B=x[1],C=(0,i.Z)((0,P.c)(_,w,d||!1),3),E=C[0],G=C[1],U=C[2],I=(0,c.Y)(t,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}})),T=(0,c.Y)(u,(function(e){if(e&&e.length>v.p)return{message:"Must be no longer than ".concat(v.p," characters")}}));o.useEffect((function(){b.current&&b.current.focus()}),[b]);var F="Team"===_.__typename?_.id:null;return(0,l.tZ)("form",{onSubmit:function(e){e.preventDefault(),I.validate()||T.validate()||(n(F,I.value,T.value,E),r())},children:(0,l.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,l.tZ)(s.h4,{variant:"headerDefault",level:2,children:"Fork Repl"}),(0,l.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,l.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,l.tZ)(m._,{for:y("name"),children:"Name"}),(0,l.tZ)(f.Z,{maxLength:60,value:I.value,hideLabel:!0})]}),(0,l.tZ)(s.II,{ref:b,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return I.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:I.value,onBlur:I.handleBlur,id:y("name")}),I.error?(0,l.tZ)(s.xv,{css:[s.l0.color.accentNegativeStronger],children:I.error.message}):null]}),(0,l.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,l.tZ)(m._,{for:y("description"),children:"Description"}),(0,l.tZ)(f.Z,{maxLength:v.p,value:T.value,hideLabel:!0})]}),(0,l.tZ)(s.B,{maxLength:v.p,value:T.value,onChange:function(e){return T.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[s.l0.minHeight(96),s.l0.maxHeight(128),{resize:"vertical"}],id:y("description")})]}),(0,l.tZ)(R.P,{context:"fork_modal",isPrivate:E,setIsPrivate:G,privacyState:U})]}),w.teams.length>0?(0,l.BX)(s.G7,{css:[s.l0.colWithGap(8)],children:[(0,l.tZ)(m._,{for:y("owner"),children:"Owner"}),(0,l.tZ)(Z.Z,{id:y("owner"),currentUser:w,initialSelectedUsername:_.username,onChange:function(e){return B(e.username)}})]}):null,(0,l.BX)(s.G7,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,l.tZ)(s.zx,{onClick:r,text:"Cancel",type:"button"}),(0,l.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:Boolean(I.error||T.error),text:"Fork Repl",iconLeft:(0,l.tZ)(p.Z,{})})]})]})})};function E(e){var n=function(e){var n=(0,t.Z)({},_,e);return y.a(B,n)}({fetchPolicy:"cache-and-network",onError:function(e){u.$e((function(n){n.setTag("fork-modal",!0),u.Tb(e)}))}}),r=n.data,i=n.loading,o=n.error;if(i)return(0,l.tZ)(s.xv,{color:"dimmer",children:"Loading..."});if(o)return(0,l.tZ)(s.xv,{children:"Something went wrong."});if(!r)return null;var c=r.currentUser;return c?(0,l.tZ)(C,(0,a.Z)((0,t.Z)({},e),{currentUser:c})):(0,l.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},59292:function(e,n,r){r.d(n,{Z:function(){return R}});var t=r(26042),a=r(69396),i=r(10253),l=r(67294),o=r(11163),u=r(93058),c=r(7297),s=r(31230),d=r(50319);function p(){var e=(0,c.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var v={},h=(0,s.Ps)(p());function f(e){var n=(0,t.Z)({},v,e);return d.D(h,n)}var m=r(33400),g=r(60977),Z=r(15935);function R(){var e,n,r,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=c.onFork,d=c.onError,p=(0,o.useRouter)(),v=(0,u.Z)().showError,h=(0,m.Z)(),R=(0,i.Z)(f({onCompleted:function(e){var n="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(n)if(s&&s(e),"/replEnvironment2"!==p.pathname&&"/replEnvironmentMobile"!==p.pathname)p.push({pathname:h,query:{replUrl:n.url}},{pathname:n.url});else{var r=n.url+(p.query.lite?"?lite=".concat(p.query.lite.toString()):"");window.location.href=r}}}),2),k=R[0],w=R[1],b="UserError"===(null===(e=w.data)||void 0===e?void 0:e.createRepl.__typename)?null===(n=w.data)||void 0===n?void 0:n.createRepl.message:null===(r=w.error)||void 0===r?void 0:r.message;l.useEffect((function(){b&&(v(b),d&&d())}),[b,v,d]);var y=l.useCallback((function(e){var n=e.originId,r=e.replReleaseId,i=e.teamId,l=e.title,o=e.description,u=e.isPrivate,c=e.trackingData,s=e.forkToPersonal;k({variables:{input:{originId:n,replReleaseId:r,teamId:i,title:l,isPrivate:u,description:o,forkToPersonal:s,gitRemoteUrl:""}}}).then((function(e){var n,i,l,o,u,s,d,p="Repl"===(null===(n=e.data)||void 0===n?void 0:n.createRepl.__typename)?e.data.createRepl:null;p&&(0,g.j)(g.U3.REPL_CREATED,(0,a.Z)((0,t.Z)({isSignup:!1,isOnboarding:!1},c),{isForked:!0,isPrivate:p.isPrivate,replId:p.id,isRenamed:!1,language:p.language,isSelfForked:!!(null===(i=p.origin)||void 0===i?void 0:i.isOwner),isTemplateFork:Boolean(r),templateReplId:(null===(l=p.source)||void 0===l||null===(o=l.release)||void 0===o||null===(u=o.repl)||void 0===u?void 0:u.id)||void 0,templateType:(null===(s=p.source)||void 0===s||null===(d=s.release)||void 0===d?void 0:d.repl)?(0,Z.lw)(p.source.release.repl):void 0}))}))}),[k]),x=!!(w.loading||w.data&&"Repl"===w.data.createRepl.__typename);return[y,{loading:x}]}},58086:function(e,n,r){r.d(n,{p:function(){return t}});var t=1e3}}]);
//# sourceMappingURL=3699-df6201b0464668cb.js.map